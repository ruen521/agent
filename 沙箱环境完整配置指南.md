# æ²™ç®±ç¯å¢ƒå®Œæ•´é…ç½®æŒ‡å—ï¼ˆåŸºäºæ–°ç•Œé¢ï¼‰

æœ¬æŒ‡å—å°†è¯¦ç»†è¯´æ˜å¦‚ä½•åœ¨æ–°çš„ Solution Provider Portal ä¸­é…ç½®æ²™ç®±ç¯å¢ƒå¹¶è·å–å‡­è¯ã€‚

---

## ğŸ“‹ å‰ç½®å‡†å¤‡

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨æœ‰ï¼š

- âœ… äºšé©¬é€Šè´¦æˆ·ï¼ˆå–å®¶è´¦æˆ·æˆ–ä¾›åº”å•†è´¦æˆ·ï¼‰
- âœ… å¯ä»¥è®¿é—®äº’è”ç½‘çš„æµè§ˆå™¨ï¼ˆæ¨è Chrome æˆ– Firefoxï¼‰
- âœ… å‡†å¤‡å¥½åº”ç”¨åç§°ï¼ˆä¾‹å¦‚ï¼šMy Inventory Managerï¼‰

---

## ç¬¬ä¸€æ­¥ï¼šè®¿é—® Solution Provider Portal

### 1.1 æ‰“å¼€é—¨æˆ·ç½‘ç«™

**ç›´æ¥è®¿é—®**: **https://solutionproviderportal.amazon.com**

æˆ–è€…é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¹‹ä¸€ï¼š

- **å–å®¶ä¸­å¿ƒ**: https://sellercentral.amazon.com â†’ **Apps and Services** â†’ **Develop Apps**
- **ä¾›åº”å•†ä¸­å¿ƒ**: https://vendorcentral.amazon.com â†’ **Integration** â†’ **API Integration**

### 1.2 ç™»å½•è´¦æˆ·

1. ç‚¹å‡»é¡µé¢ä¸Šçš„ **"Sign In"**ï¼ˆç™»å½•ï¼‰æŒ‰é’®
2. è¾“å…¥æ‚¨çš„äºšé©¬é€Šè´¦æˆ·é‚®ç®±å’Œå¯†ç 
3. å®Œæˆä¸¤æ­¥éªŒè¯ï¼ˆå¦‚æœå¯ç”¨ï¼‰

### 1.3 ç¡®è®¤ç•Œé¢

ç™»å½•æˆåŠŸåï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ï¼š

- é¡¶éƒ¨å¯¼èˆªæ åŒ…å«ï¼š**Dashboard**ã€**Develop Apps**ã€**Appstore**ã€**Settings**
- ä¸»é¡µé¢æ˜¾ç¤ºåº”ç”¨åˆ—è¡¨ï¼ˆå¦‚æœæ˜¯é¦–æ¬¡è®¿é—®ï¼Œåˆ—è¡¨å¯èƒ½ä¸ºç©ºï¼‰

**å¦‚æœçœ‹ä¸åˆ° "Develop Apps" é€‰é¡¹**ï¼š
- æ‚¨å¯èƒ½éœ€è¦å…ˆå®Œæˆå¼€å‘è€…æ³¨å†Œ
- è®¿é—®ï¼šhttps://developer.amazonservices.com/register
- å®Œæˆæ³¨å†Œåé‡æ–°ç™»å½•

---

## ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ²™ç®±åº”ç”¨

### 2.1 è¿›å…¥åº”ç”¨å¼€å‘é¡µé¢

1. åœ¨é¡¶éƒ¨å¯¼èˆªæ ï¼Œç‚¹å‡» **"Develop Apps"**ï¼ˆå¼€å‘åº”ç”¨ï¼‰
2. é¡µé¢ä¼šæ˜¾ç¤ºæ‚¨çš„åº”ç”¨åˆ—è¡¨ï¼ˆå¦‚æœæ˜¯æ–°è´¦æˆ·ï¼Œåˆ—è¡¨ä¸ºç©ºï¼‰

### 2.2 åˆ›å»ºæ–°åº”ç”¨

1. ç‚¹å‡»é¡µé¢ä¸Šçš„ **"Add new app client"**ï¼ˆæ·»åŠ æ–°åº”ç”¨å®¢æˆ·ç«¯ï¼‰æŒ‰é’®
   - æŒ‰é’®é€šå¸¸åœ¨é¡µé¢å³ä¸Šè§’æˆ–åº”ç”¨åˆ—è¡¨ä¸Šæ–¹

2. é¡µé¢ä¼šæ‰“å¼€åº”ç”¨åˆ›å»ºè¡¨å•

### 2.3 å¡«å†™åº”ç”¨åŸºæœ¬ä¿¡æ¯

åœ¨åº”ç”¨åˆ›å»ºè¡¨å•ä¸­ï¼Œå¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š

#### å¿…å¡«å­—æ®µï¼š

**App Nameï¼ˆåº”ç”¨åç§°ï¼‰**
- è¾“å…¥ï¼š`My FBA Inventory Manager`ï¼ˆæˆ–æ‚¨å–œæ¬¢çš„åç§°ï¼‰
- è¿™æ˜¯åº”ç”¨çš„æ˜¾ç¤ºåç§°ï¼Œå¯ä»¥éšæ—¶ä¿®æ”¹

**API Typeï¼ˆAPI ç±»å‹ï¼‰**
- é€‰æ‹©ï¼š**SP-API**ï¼ˆSelling Partner APIï¼‰
- è¿™æ˜¯ä¸‹æ‹‰èœå•ï¼Œç¡®ä¿é€‰æ‹©æ­£ç¡®

**Application Typeï¼ˆåº”ç”¨ç±»å‹ï¼‰**
- â­ **é‡è¦**ï¼šé€‰æ‹© **"Sandbox"**ï¼ˆæ²™ç®±ï¼‰
- æ²™ç®±ç¯å¢ƒç”¨äºæµ‹è¯•ï¼Œæ— éœ€æƒé™å®¡æ ¸å³å¯ä½¿ç”¨
- å¦‚æœé€‰æ‹© "Production"ï¼ˆç”Ÿäº§ï¼‰ï¼Œéœ€è¦ç­‰å¾…æƒé™å®¡æ ¸

**Application Categoryï¼ˆåº”ç”¨ç±»åˆ«ï¼‰**
- é€‰æ‹©ï¼š**Seller**ï¼ˆå–å®¶ï¼‰æˆ– **Vendor**ï¼ˆä¾›åº”å•†ï¼‰
- æ ¹æ®æ‚¨çš„è´¦æˆ·ç±»å‹é€‰æ‹©

#### å¯é€‰å­—æ®µï¼š

**Descriptionï¼ˆæè¿°ï¼‰**
- è¾“å…¥åº”ç”¨çš„ç®€è¦æè¿°ï¼ˆå¯é€‰ï¼‰
- ä¾‹å¦‚ï¼š`ç”¨äºç®¡ç† FBA åº“å­˜çš„æµ‹è¯•åº”ç”¨`

**OAuth Redirect URIï¼ˆOAuth é‡å®šå‘ URIï¼‰**
- å¦‚æœæ‚¨çš„åº”ç”¨éœ€è¦ OAuth æˆæƒï¼Œå¡«å†™å›è°ƒ URL
- å¯¹äºæœ¬åœ°æµ‹è¯•ï¼š`http://localhost:3000/auth/callback`
- å¯¹äº Web åº”ç”¨ï¼š`https://your-domain.com/auth/callback`
- âš ï¸ **é‡è¦**ï¼šè¿™ä¸ª URI å¿…é¡»ä¸åç»­æˆæƒæµç¨‹ä¸­ä½¿ç”¨çš„å®Œå…¨ä¸€è‡´

### 2.4 ä¿å­˜åº”ç”¨

1. æ£€æŸ¥æ‰€æœ‰å¿…å¡«å­—æ®µæ˜¯å¦å·²å¡«å†™
2. ç¡®è®¤ **Application Type** é€‰æ‹©äº† **"Sandbox"**
3. ç‚¹å‡»é¡µé¢åº•éƒ¨çš„ **"Save"**ï¼ˆä¿å­˜ï¼‰æŒ‰é’®

### 2.5 ç¡®è®¤åº”ç”¨åˆ›å»ºæˆåŠŸ

ä¿å­˜åï¼Œæ‚¨ä¼šçœ‹åˆ°ï¼š

- âœ… æˆåŠŸæ¶ˆæ¯æç¤º
- åº”ç”¨å‡ºç°åœ¨åº”ç”¨åˆ—è¡¨ä¸­
- åº”ç”¨çŠ¶æ€æ˜¾ç¤ºä¸º **"Draft"**ï¼ˆè‰ç¨¿ï¼‰æˆ– **"Active"**ï¼ˆæ´»è·ƒï¼‰

---

## ç¬¬ä¸‰æ­¥ï¼šè·å–åº”ç”¨å‡­è¯

### 3.1 æ‰“å¼€åº”ç”¨è¯¦æƒ…é¡µ

1. åœ¨åº”ç”¨åˆ—è¡¨ä¸­ï¼Œæ‰¾åˆ°æ‚¨åˆšåˆ›å»ºçš„åº”ç”¨
2. ç‚¹å‡»åº”ç”¨åç§°æˆ– **"View"**ï¼ˆæŸ¥çœ‹ï¼‰æŒ‰é’®
3. è¿›å…¥åº”ç”¨è¯¦æƒ…é¡µé¢

### 3.2 æŸ¥çœ‹å‡­è¯ä¿¡æ¯

åœ¨åº”ç”¨è¯¦æƒ…é¡µé¢ï¼ŒæŸ¥æ‰¾ä»¥ä¸‹éƒ¨åˆ†ï¼š

**Credentialsï¼ˆå‡­è¯ï¼‰** æˆ– **LWA Credentialsï¼ˆLWA å‡­è¯ï¼‰**

æ‚¨åº”è¯¥èƒ½çœ‹åˆ°ï¼š

#### Client ID (LWA)
- æ ¼å¼ç±»ä¼¼ï¼š`amzn1.application-oa2-client.xxxxxxxxxxxxx`
- è¿™æ˜¯ä¸€ä¸ªé•¿å­—ç¬¦ä¸²ï¼Œä»¥ `amzn1.application-oa2-client.` å¼€å¤´

#### Client Secret (LWA)
- æ ¼å¼ç±»ä¼¼ï¼š`xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`
- è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼ˆé€šå¸¸ 64 ä¸ªå­—ç¬¦ï¼‰

### 3.3 å¤åˆ¶å¹¶ä¿å­˜å‡­è¯

**âš ï¸ éå¸¸é‡è¦**ï¼š

1. **ç«‹å³å¤åˆ¶ Client Secret**
   - Client Secret **åªæ˜¾ç¤ºä¸€æ¬¡**
   - å¦‚æœå…³é—­é¡µé¢åä¸¢å¤±ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆ
   - å»ºè®®ç«‹å³å¤åˆ¶åˆ°å®‰å…¨çš„åœ°æ–¹

2. **ä¿å­˜å‡­è¯çš„æ–¹å¼**ï¼š
   - ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ï¼ˆä¸è¦æäº¤åˆ°ä»£ç ä»“åº“ï¼‰
   - æˆ–ä½¿ç”¨å¯†ç ç®¡ç†å™¨ä¿å­˜
   - æˆ–è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆè§ä¸‹æ–¹ï¼‰

3. **å®‰å…¨æç¤º**ï¼š
   - âŒ ä¸è¦å°†å‡­è¯æäº¤åˆ° Git ä»“åº“
   - âŒ ä¸è¦åˆ†äº«ç»™ä»–äºº
   - âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶ï¼ˆæ·»åŠ åˆ° .gitignoreï¼‰

### 3.4 å¦‚æœæ‰¾ä¸åˆ°å‡­è¯

å¦‚æœåº”ç”¨è¯¦æƒ…é¡µé¢æ²¡æœ‰æ˜¾ç¤ºå‡­è¯ï¼š

1. **æ£€æŸ¥åº”ç”¨çŠ¶æ€**
   - ç¡®ä¿åº”ç”¨å·²ä¿å­˜ï¼ˆä¸æ˜¯è‰ç¨¿çŠ¶æ€ï¼‰
   - æŸäº›æƒ…å†µä¸‹ï¼Œå‡­è¯å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ‰æ˜¾ç¤º

2. **æŸ¥æ‰¾å…¶ä»–ä½ç½®**
   - æŸ¥çœ‹é¡µé¢æ˜¯å¦æœ‰ **"View Credentials"**ï¼ˆæŸ¥çœ‹å‡­è¯ï¼‰æŒ‰é’®
   - æˆ– **"Show Credentials"**ï¼ˆæ˜¾ç¤ºå‡­è¯ï¼‰é“¾æ¥
   - æŸäº›ç•Œé¢å¯èƒ½éœ€è¦ç‚¹å‡»æ‰èƒ½æ˜¾ç¤º

3. **é‡æ–°ç”Ÿæˆ**
   - å¦‚æœç¡®å®æ‰¾ä¸åˆ°ï¼Œå¯ä»¥å°è¯•é‡æ–°ç”Ÿæˆ Client Secret
   - åœ¨åº”ç”¨è¯¦æƒ…é¡µé¢æŸ¥æ‰¾ **"Regenerate Secret"**ï¼ˆé‡æ–°ç”Ÿæˆå¯†é’¥ï¼‰é€‰é¡¹

---

## ç¬¬å››æ­¥ï¼šè·å– Refresh Token

### 4.1 å‡†å¤‡æˆæƒæµç¨‹

è¦è·å– Refresh Tokenï¼Œæ‚¨éœ€è¦å®Œæˆæˆæƒæµç¨‹ã€‚

**æ²™ç®±ç¯å¢ƒçš„ä¼˜åŠ¿**ï¼šå¯ä»¥ä½¿ç”¨è‡ªæˆæƒæµç¨‹ï¼Œæ— éœ€ç­‰å¾…å…¶ä»–å–å®¶æˆæƒã€‚

### 4.2 ç”Ÿæˆæˆæƒ URL

ä½¿ç”¨ä»¥ä¸‹ Python è„šæœ¬ç”Ÿæˆæˆæƒ URLï¼ˆæ³¨æ„ï¼šæˆæƒ URL é‡Œç”¨ **Application ID**ï¼Œä¸æ˜¯ LWA Client IDï¼‰ï¼š

```python
import secrets
import urllib.parse

# ä»åº”ç”¨è¯¦æƒ…é¡µè·å–çš„å‡­è¯
APPLICATION_ID = 'your_application_id_here'  # æ›¿æ¢ä¸º Application IDï¼ˆamzn1.sp.solution...ï¼‰
LWA_CLIENT_ID = 'your_client_id_here'        # LWA Client IDï¼ˆamzn1.application-oa2-client...ï¼‰
REDIRECT_URI = 'http://localhost:3000/auth/callback'  # å¿…é¡»ä¸åˆ›å»ºåº”ç”¨æ—¶è®¾ç½®çš„ä¸€è‡´

# ç”Ÿæˆéšæœº stateï¼ˆç”¨äºå®‰å…¨éªŒè¯ï¼‰
state = secrets.token_urlsafe(32)

# æ„å»ºæˆæƒ URL
params = {
    'application_id': APPLICATION_ID,
    'state': state,
    'redirect_uri': REDIRECT_URI
}

# Draft åº”ç”¨éœ€è¦ version=betaï¼›Active åº”ç”¨ä¸è¦åŠ 
# params['version'] = 'beta'
auth_url = f"https://sellercentral.amazon.com/apps/authorize/consent?{urllib.parse.urlencode(params)}"
# å¦‚æœä½ çš„è´¦å·ä¸æ˜¯åŒ—ç¾å–å®¶ï¼Œè¯·æ›¿æ¢ä¸ºå¯¹åº”åŒºåŸŸ/ç±»å‹çš„ Seller Central / Vendor Central åŸŸå

print("=" * 70)
print("è¯·è®¿é—®ä»¥ä¸‹ URL è¿›è¡Œæˆæƒï¼š")
print("=" * 70)
print(auth_url)
print("\nè¯·ä¿å­˜ state å€¼ç”¨äºéªŒè¯:", state)
```

æˆ–è€…ä½¿ç”¨æˆ‘ä»¬æä¾›çš„å·¥å…·ï¼ˆä¼šæç¤ºè¾“å…¥ Application ID / LWA Client ID / Client Secretï¼‰ï¼š

```bash
python get_credentials.py
```

### 4.3 å®Œæˆæˆæƒ

1. **è®¿é—®æˆæƒ URL**
   - å¤åˆ¶ä¸Šé¢ç”Ÿæˆçš„æˆæƒ URL
   - åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€

2. **ç™»å½•å¹¶æˆæƒ**
   - ä½¿ç”¨æ‚¨çš„äºšé©¬é€Šè´¦æˆ·ç™»å½•
   - æŸ¥çœ‹æƒé™è¯·æ±‚é¡µé¢
   - ç‚¹å‡» **"Authorize"**ï¼ˆæˆæƒï¼‰æŒ‰é’®

3. **è·å–æˆæƒç **
   - æˆæƒæˆåŠŸåï¼Œæµè§ˆå™¨ä¼šé‡å®šå‘åˆ°æ‚¨çš„ redirect_uri
   - URL ä¸­ä¼šåŒ…å« `spapi_oauth_code` å‚æ•°
   - ä¾‹å¦‚ï¼š`http://localhost:3000/auth/callback?state=xxx&spapi_oauth_code=Atzr|xxxxx`

### 4.4 äº¤æ¢ Refresh Token

ä½¿ç”¨æˆæƒç äº¤æ¢ Refresh Tokenï¼ˆè¿™é‡Œç”¨ **LWA Client ID / Client Secret**ï¼‰ï¼š

```python
import requests

CLIENT_ID = 'your_lwa_client_id'
CLIENT_SECRET = 'your_client_secret'
AUTHORIZATION_CODE = 'spapi_oauth_code_from_url'  # ä»é‡å®šå‘ URL ä¸­è·å–
REDIRECT_URI = 'http://localhost:3000/auth/callback'

url = "https://api.amazon.com/auth/o2/token"

payload = {
    "grant_type": "authorization_code",
    "code": AUTHORIZATION_CODE,
    "redirect_uri": REDIRECT_URI,
    "client_id": CLIENT_ID,
    "client_secret": CLIENT_SECRET
}

headers = {
    "Content-Type": "application/x-www-form-urlencoded"
}

response = requests.post(url, data=payload, headers=headers)

if response.status_code == 200:
    data = response.json()
    refresh_token = data["refresh_token"]
    access_token = data.get("access_token", "")
    
    print("=" * 70)
    print("âœ“ æˆåŠŸè·å– Refresh Tokenï¼")
    print("=" * 70)
    print(f"\nRefresh Token: {refresh_token}")
    print(f"Access Token: {access_token[:30]}...")
    print("\nè¯·å®‰å…¨ä¿å­˜ Refresh Tokenï¼")
else:
    print(f"âœ— å¤±è´¥: {response.status_code}")
    print(f"å“åº”: {response.text}")
```

**æˆ–ä½¿ç”¨æˆ‘ä»¬çš„å·¥å…·**ï¼š

```bash
python get_credentials.py
```

å·¥å…·ä¼šè‡ªåŠ¨å¤„ç†æ•´ä¸ªæµç¨‹ã€‚

---

## ç¬¬äº”æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡

### 5.1 è®¾ç½®ç¯å¢ƒå˜é‡

è·å–æ‰€æœ‰å‡­è¯åï¼Œè®¾ç½®ç¯å¢ƒå˜é‡ï¼š

#### macOS/Linux:

```bash
export AMAZON_SP_API_CLIENT_ID="your_client_id"
export AMAZON_SP_API_CLIENT_SECRET="your_client_secret"
export AMAZON_SP_API_REFRESH_TOKEN="your_refresh_token"
export AMAZON_SP_API_REGION="na"
export AMAZON_SP_API_USE_SANDBOX="true"  # å¯ç”¨æ²™ç®±ç¯å¢ƒ
```

#### Windows PowerShell:

```powershell
$env:AMAZON_SP_API_CLIENT_ID="your_client_id"
$env:AMAZON_SP_API_CLIENT_SECRET="your_client_secret"
$env:AMAZON_SP_API_REFRESH_TOKEN="your_refresh_token"
$env:AMAZON_SP_API_REGION="na"
$env:AMAZON_SP_API_USE_SANDBOX="true"
```

#### Windows CMD:

```cmd
set AMAZON_SP_API_CLIENT_ID=your_client_id
set AMAZON_SP_API_CLIENT_SECRET=your_client_secret
set AMAZON_SP_API_REFRESH_TOKEN=your_refresh_token
set AMAZON_SP_API_REGION=na
set AMAZON_SP_API_USE_SANDBOX=true
```

### 5.2 åˆ›å»ºé…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰

åˆ›å»º `config.json` æ–‡ä»¶ï¼š

```json
{
  "amazon_sp_api": {
    "client_id": "your_client_id",
    "client_secret": "your_client_secret",
    "refresh_token": "your_refresh_token",
    "region": "na"
  },
  "settings": {
    "use_sandbox": true
  }
}
```

**é‡è¦**ï¼šå°†æ­¤æ–‡ä»¶æ·»åŠ åˆ° `.gitignore`ï¼Œä¸è¦æäº¤åˆ°ä»£ç ä»“åº“ï¼

---

## ç¬¬å…­æ­¥ï¼šéªŒè¯é…ç½®

### 6.1 æµ‹è¯•è¿æ¥

åˆ›å»ºæµ‹è¯•è„šæœ¬ `test_connection.py`ï¼š

```python
import os
import sys

# æ·»åŠ ç”Ÿæˆçš„å®¢æˆ·ç«¯åˆ°è·¯å¾„
sys.path.insert(0, 'my-spapi-client')

from spapi_client_helper import SPAPIClientHelper, SPAPITokenManager

# æ£€æŸ¥ç¯å¢ƒå˜é‡
required_vars = [
    'AMAZON_SP_API_CLIENT_ID',
    'AMAZON_SP_API_CLIENT_SECRET',
    'AMAZON_SP_API_REFRESH_TOKEN'
]

missing = [var for var in required_vars if not os.getenv(var)]
if missing:
    print("âœ— ç¼ºå°‘ä»¥ä¸‹ç¯å¢ƒå˜é‡:")
    for var in missing:
        print(f"  - {var}")
    sys.exit(1)

# åˆ›å»º Token ç®¡ç†å™¨
print("æ­£åœ¨åˆå§‹åŒ– Token ç®¡ç†å™¨...")
token_manager = SPAPITokenManager(
    client_id=os.getenv('AMAZON_SP_API_CLIENT_ID'),
    client_secret=os.getenv('AMAZON_SP_API_CLIENT_SECRET'),
    refresh_token=os.getenv('AMAZON_SP_API_REFRESH_TOKEN')
)

# åˆ›å»ºæ²™ç®±å®¢æˆ·ç«¯
print("æ­£åœ¨åˆ›å»ºæ²™ç®±å®¢æˆ·ç«¯...")
    client = SPAPIClientHelper(
        token_manager=token_manager,
        region='na',
        use_sandbox=True  # ä½¿ç”¨æ²™ç®±ç¯å¢ƒ
    )

print(f"\nâœ“ å®¢æˆ·ç«¯åˆ›å»ºæˆåŠŸ")
print(f"  ç«¯ç‚¹: {client.endpoint}")
print(f"  åŒºåŸŸ: {client.region}")
print(f"  ç¯å¢ƒ: {'æ²™ç®±' if client.use_sandbox else 'ç”Ÿäº§'}")

# æµ‹è¯• API è°ƒç”¨
print("\næ­£åœ¨æµ‹è¯• API è¿æ¥...")
try:
    response = client.get_inventory_summaries(
        marketplace_id='ATVPDKIKX0DER',  # æˆ–ä½¿ç”¨ 'us'
        granularity_type='Marketplace',
        granularity_id='ATVPDKIKX0DER',  # granularity_id å¿…é¡»æ˜¯ Marketplace ID
        details=True
    )
    print("âœ“ API è¿æ¥æˆåŠŸï¼")
    print(f"  å“åº”ç±»å‹: {type(response)}")
except Exception as e:
    print(f"âœ— API è¿æ¥å¤±è´¥: {e}")
    sys.exit(1)

print("\n" + "=" * 70)
print("é…ç½®éªŒè¯æˆåŠŸï¼")
print("=" * 70)
```

### 6.2 è¿è¡Œæµ‹è¯•

```bash
python test_connection.py
```

å¦‚æœçœ‹åˆ° "é…ç½®éªŒè¯æˆåŠŸï¼"ï¼Œè¯´æ˜é…ç½®æ­£ç¡®ã€‚

---

## ç¬¬ä¸ƒæ­¥ï¼šè¿è¡Œå®Œæ•´æµ‹è¯•

### 7.1 è¿è¡Œæ²™ç®±æµ‹è¯•è„šæœ¬

```bash
python test_sandbox.py
```

è¿™ä¸ªè„šæœ¬ä¼šæµ‹è¯•ï¼š
- âœ… è·å–åº“å­˜æ‘˜è¦
- âœ… åˆ›å»ºåº“å­˜å•†å“ï¼ˆä»…æ²™ç®±ï¼‰
- âœ… æ·»åŠ åº“å­˜ï¼ˆä»…æ²™ç®±ï¼‰
- âœ… åˆ é™¤åº“å­˜å•†å“ï¼ˆä»…æ²™ç®±ï¼‰

### 7.2 æŸ¥çœ‹æµ‹è¯•ç»“æœ

æµ‹è¯•è„šæœ¬ä¼šæ˜¾ç¤ºæ¯ä¸ªæ“ä½œçš„æ‰§è¡Œç»“æœï¼š

```
============================================================
æµ‹è¯• 1: è·å–åº“å­˜æ‘˜è¦
============================================================
âœ“ æˆåŠŸè·å–åº“å­˜æ‘˜è¦
  æ‰¾åˆ° X ä¸ªåº“å­˜é¡¹ï¼ˆæ²™ç®±æµ‹è¯•æ•°æ®ï¼‰

============================================================
æµ‹è¯• 2: åˆ›å»ºåº“å­˜å•†å“ï¼ˆä»…æ²™ç®±ï¼‰
============================================================
âœ“ æˆåŠŸåˆ›å»ºåº“å­˜å•†å“: TEST-SKU-XXXXX
  æ•°é‡: 10

...
```

---

## ğŸ“‹ å®Œæ•´æ£€æŸ¥æ¸…å•

åœ¨å¼€å§‹ä½¿ç”¨ä¹‹å‰ï¼Œç¡®è®¤ä»¥ä¸‹æ‰€æœ‰é¡¹ç›®ï¼š

### å‡­è¯å‡†å¤‡
- [ ] å·²åˆ›å»ºæ²™ç®±åº”ç”¨
- [ ] å·²è·å– Client ID
- [ ] å·²è·å– Client Secretï¼ˆå·²å®‰å…¨ä¿å­˜ï¼‰
- [ ] å·²è·å– Refresh Token
- [ ] æ‰€æœ‰å‡­è¯å·²è®¾ç½®åˆ°ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶

### ç¯å¢ƒé…ç½®
- [ ] å·²å®‰è£… Python ä¾èµ–ï¼ˆ`pip install -r my-spapi-client/requirements.txt`ï¼‰
- [ ] å·²è®¾ç½® `AMAZON_SP_API_USE_SANDBOX=true`
- [ ] å·²æµ‹è¯•è¿æ¥æˆåŠŸ

### ä»£ç å‡†å¤‡
- [ ] å·²ç”Ÿæˆ SDK ä»£ç ï¼ˆ`my-spapi-client` ç›®å½•å­˜åœ¨ï¼‰
- [ ] å·²åˆ›å»ºæµ‹è¯•è„šæœ¬
- [ ] å·²è¿è¡Œæµ‹è¯•å¹¶æˆåŠŸ

---

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

### å…³é”® URL

| ç”¨é€” | URL |
|------|-----|
| **Solution Provider Portal** | https://solutionproviderportal.amazon.com |
| **å¼€å‘è€…æ³¨å†Œ** | https://developer.amazonservices.com/register |
| **æˆæƒé¡µé¢** | https://sellercentral.amazon.com/apps/authorize/consent |
| **Token äº¤æ¢** | https://api.amazon.com/auth/o2/token |

### å…³é”®å‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **Application Type** | å¿…é¡»é€‰æ‹© **Sandbox** | Sandbox |
| **API Type** | å¿…é¡»é€‰æ‹© **SP-API** | SP-API |
| **Redirect URI** | å¿…é¡»ä¸æˆæƒ URL ä¸€è‡´ | `http://localhost:3000/auth/callback` |
| **Region** | åŒºåŸŸä»£ç  | `na`ï¼ˆåŒ—ç¾ï¼‰ |

---

## â“ å¸¸è§é—®é¢˜

### Q1: åˆ›å»ºåº”ç”¨æ—¶æ‰¾ä¸åˆ° "Sandbox" é€‰é¡¹

**A**: ç¡®ä¿åœ¨ **Application Type** å­—æ®µä¸­é€‰æ‹©ã€‚æŸäº›ç•Œé¢å¯èƒ½æ˜¾ç¤ºä¸ºä¸‹æ‹‰èœå•ï¼Œé€‰æ‹© "Sandbox" è€Œä¸æ˜¯ "Production"ã€‚

### Q2: æˆæƒåæ²¡æœ‰æ”¶åˆ°æˆæƒç 

**A**: 
- æ£€æŸ¥ redirect_uri æ˜¯å¦æ­£ç¡®
- ç¡®ä¿åº”ç”¨åˆ›å»ºæ—¶è®¾ç½®çš„ redirect_uri ä¸æˆæƒ URL ä¸­çš„å®Œå…¨ä¸€è‡´
- æ£€æŸ¥æµè§ˆå™¨åœ°å€æ çš„å®Œæ•´ URL

### Q3: äº¤æ¢ Refresh Token æ—¶å‡ºé”™

**A**: 
- ç¡®è®¤æˆæƒç æœªè¿‡æœŸï¼ˆæˆæƒç æœ‰æ•ˆæœŸå¾ˆçŸ­ï¼‰
- æ£€æŸ¥ Client ID å’Œ Client Secret æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ redirect_uri ä¸åˆ›å»ºåº”ç”¨æ—¶è®¾ç½®çš„ä¸€è‡´

### Q4: æµ‹è¯•æ—¶æç¤º 404 é”™è¯¯

**A**: 
- ç¡®è®¤ `use_sandbox=True`
- æ£€æŸ¥ç«¯ç‚¹æ˜¯å¦æ­£ç¡®ï¼ˆåº”è¯¥æ˜¯ `sandbox.sellingpartnerapi-*.amazon.com`ï¼‰
- æŸäº›æ“ä½œä»…åœ¨æ²™ç®±ä¸­å¯ç”¨ï¼Œç¡®ä¿ä½¿ç”¨çš„æ˜¯æ²™ç®±ç«¯ç‚¹

---

## ğŸ“š ä¸‹ä¸€æ­¥

é…ç½®å®Œæˆåï¼Œæ‚¨å¯ä»¥ï¼š

1. **æŸ¥çœ‹ç¤ºä¾‹ä»£ç **: `spapi_config_example.py`
2. **è¿è¡Œå®Œæ•´æµ‹è¯•**: `python test_sandbox.py`
3. **é˜…è¯» API æ–‡æ¡£**: `my-spapi-client/docs/`
4. **å¼€å§‹å¼€å‘**: ä½¿ç”¨æ²™ç®±ç¯å¢ƒè¿›è¡Œå¼€å‘å’Œæµ‹è¯•

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **å¿«é€Ÿè®¿é—®æŒ‡å—**: `å¿«é€Ÿè®¿é—®æŒ‡å—.md`
- **æ²™ç®±ç¯å¢ƒä½¿ç”¨**: `æ²™ç®±ç¯å¢ƒä½¿ç”¨æŒ‡å—.md`
- **é—®é¢˜æ’æŸ¥**: `è®¿é—®æ§åˆ¶å°é—®é¢˜æ’æŸ¥.md`
- **è·å–å‡­è¯**: `å¦‚ä½•è·å–å‡­è¯.md`

---

## ğŸ’¡ æç¤º

1. **æ²™ç®±ç¯å¢ƒæ— éœ€æƒé™å®¡æ ¸** - åˆ›å»ºåº”ç”¨åå¯ä»¥ç«‹å³ä½¿ç”¨
2. **æµ‹è¯•æ•°æ®** - æ²™ç®±è¿”å›çš„æ˜¯æ¨¡æ‹Ÿæ•°æ®ï¼Œä¸æ˜¯çœŸå®åº“å­˜
3. **å®Œæ•´åŠŸèƒ½** - æ²™ç®±æ”¯æŒåˆ›å»º/åˆ é™¤/æ·»åŠ åº“å­˜ç­‰æ“ä½œ
4. **å®‰å…¨ä¿å­˜å‡­è¯** - ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡ï¼Œä¸è¦æäº¤åˆ°ä»£ç ä»“åº“

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰
